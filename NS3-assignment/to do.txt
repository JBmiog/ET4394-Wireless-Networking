what do I want to know
	what happens if an encreasing amount of AP fail in a network with respect to
	- the average througput per node
	- the average delay
	- regarding which data rate's? 
		- constant


How should a network reconfigure itself
- load balancing

what am i going to measure
 - average incomming data on the end node
 - average delay... unsure how this is working 
 - with respect to different data rate's on the wifi

what do I think is going to happen
I geuss we'll see the speed go down lineairly, also depending on the amount 
of traffic that is being generated. 

what are the conclusions


steps:
- first create two bridges and a point to point link in between them
	- V attach one node on each end
		- V we created some traffic
		- V display average delays and average throughput 
		- V print node IP's
			CURRENT OUTPUT
				Node 1	 IP Address 10.1.1.1
				 Node 2	 IP Address 10.1.1.2
				At time 2s client sent 1024 bytes to 10.1.1.2 port 9
				At time 2.00369s server received 1024 bytes from 10.1.1.1 port 49153
				At time 2.00369s server sent 1024 bytes to 10.1.1.1 port 49153
				At time 2.00737s client received 1024 bytes from 10.1.1.2 port 9
				Flow 1 (10.1.1.1 -> 10.1.1.2)
				 Tx Bytes: 1052
				 Rx Bytes: 1052
				 Average Throughput: 1114.74 kbps
				 Delay : +3686400.0ns
				Flow 2 (10.1.1.2 -> 10.1.1.1)
				 Tx Bytes: 1052
				 Rx Bytes: 1052
				 Average Throughput: 1114.74 kbps
				 Delay : +3686400.0ns
	
	- attach a second p2p link, which is connect to the central node
		- first divide in Ap's and a central node	\
			- something vishy, the througput is twice as good now(?)
			-- wauwa kanker kanker kanker dign
			"10.0.1.1" is wel een adress type
			maar "10.0.1.1" niet
		- het is te kanker moeilijk om een twee en een derde p2p verbindigne
			dynamisch toe te voegen
		- probeer eerst maar een wifi netwerk toe te voegen.
		- okey, en de addressen werken ook, helaas klapt de simulator er
			uit op het moment dat we hem aan zetten.  ik ga ff eten en ben zo terug
		- we gaan proberen de wifi modules uit te zetten, en kijken of de udp dan nog werkt.
		- niet duidelijk waarom de segmentation fault steeds naar boven komt.
			-  verder met third.cc
				- V add flowmonitor maar opnieuw
				- beuk de csma devices er maar weer uit
					- dat is teveel gevraagd
						- probeer eerst maar van sta naar sta data te versturen
						- van sta naar p2p n1 lukt
						- nu van alle nodes naar N1 ?
							- wat met de data rate?
							- wat met de payload size?
							- wat met het aantal packets?
						- de simulator is dood, eerst maar weer opnieuw opstarten
						- denk even na, wat leer je hier?
							- omgaan met de ns3 simulator... dit zou je dus moeten leren
								- waarom lukt dat niet? omdat je geen foutmeldingen kan lezen! 
								- omdat je niet begrijpt wat de basale blokken doen
										- wat doen de basale blokken?
											- yanswifi helper 
												- gaat dat via CSMA? welke wifi versie is dit?
										- 802.11a staat in een paper van die gasten  

							- hoe je een simulatie moet draaien... nee
								- de uitkomsten van je simulatie... nee
							- programmeren in c++ ... swa een beetje
						- simulator opnieuw opgestart
						- csma is er eindelijk uit.
				- ga je een bash script schrijven en de uitkomst afvangen en met matlab in gnuplot
					stoppen?
					nee dit kan ook met gnuplot, maar dan moeten de variabelen wel tijdens de simulatie verzameld worden, volgens mij kunnen we de simulatie ook iteratief aanroepen, en steeds iets minder AP's in het netwerk stoppen. Maar van waar naar waar ga je dan verkeer versturen? ik denk van elk netwerk een STA pakken, en die naar de p2p central node sturen. dus moet je dynamisch kunnen aanpassen hoeveel p2p nodes er in het netwerk komen. dit is wel te doen? 
				- gaan nu verder met wifi-wired-bridging. 
				- wat voor traffic gaan we genereren?
					-  ping lekker de sta met het hoogste address
				- laat nu alle nodes, uit elk net dat doen.
				- nu ervoor zorgen dat we de metingen goed krijgen
					- berekening van de average througput
						throughput eacht node / no of nodes. 
						= tx - rx / no of nodes. 
						wat is throughput eigenlijk???
						amount of bits transmitted from start to finish
					- V berekening van de average delay
					- hoe gaan we plotten?
						- hardcoded STA en AP erin, meerdere loopjes en gegevens in
							een gnu plot douwen
							niet: gnu plot is lastig, 
							wel: één script draaien en je heb de output, neit afhankelijk van
								libre office
						- bash script die het script met meerdere variabele aanroept, 
							output verzameld, in een excel flikkerd en vanuit daar plotten
							wel: inzichtelijk, code hoeft niet veel gewijzigd te worden
								leuk om bash beter te leren gebruiken, vaker handig dan gnuplot
								later eventueel ook andere scripts aanroepen voor output.
							niet: bash script is een gedoe, output van script aanpassen?

- via bash scripts runnen en de output in excel tabellen gooien.
	- dit wordt een python script,	maar wat is 
		stderr	standard error
		stdout	,, output
		stdin	,, input
	- en hoe werken de subprocessen dan?
		ah, dat is gewoon een process dat je in de terminal kan starten, in ons geval dus het de 
simulatie van ns3
	- nu dus een index van een string zoeken... 	
	- we gebruiken wel een indicator ** voor het begin en het einde van de value
	 	die we willen copieren
	- waarom wordt de eersrte helft van de output wel gekopierd, en de tweede helft niet?
	- nog steeds geen idee, iets met de '&' maar dit kan in python niet, die returned gelijk de string
- we kunnen het ns3 programma aanpassen zodat het met een debug/to file arg kan runnen, zodat je mooi een plot kan maken. ik denk dat we dit gaan doen.
- uiteindelijk de hele zooi in ns3 gestopt, omdat ik de ./waf output niet tussendoor wilde hebben, en het eruit te filteren met bash en python was eventjes te moeilijk.

- het verslag!
	- intro
		- short assignment description
		- background of ns3
		- background of 802.11
	- NS3
		- history 
		- ...?? 
	- assignment description
		- measuring the throughput differenence with failing AP's
	- hypotosis
		- less throughput if nodes per device goes up. 
	- implementation ( in depth..-) 
		- 
	- results
		- pcap? 
	- conclusion
		- graphs
	- discussion


reconfigure():
	if (node.connected != 1)
		node.connect(closest_AP_in_range)

for i in number of AP:
	what is the average throughput of active nodes 
	what is the average delay		
	liveAP(i) = liveAP(i) - 1
	reconfigure();

questions:
how the bloodyhell do you get debug info about your script with the corresponding
line number????? fuck this!
fucker the fuckthis
wat is er nu vervelend?
	- color scheme wil niet meer terug
		- doet het weer
	- third.cc draait niet meer		 
	- third.cc heeft de info die we nodig hebben


how does the netdevice and netcontainer actually coorperate? 
	net device is a "networkcard" both software and hardware simulator, 
	which is installed in a Node in order to enable the Node  to communicate
	with toher Node via Channels.
	The NetDevice class provides methods for managing connections to Node and Channel objects.

How to make a connection?
1) make a NodeContainer nodes; which contains an empty node container
2) nodes.create(2) will create two nodes, which will still do nothing
3) create a PointToPointHelper (pointToPoint), add the attributes to them. The point to point helper will help
us connect the PointToPoinNetDevice and the PointToPointChannel objects in the script. my
guess is that it will actually create these two objects and couples them directly, without you knowing it. 
4) okey, it does not do this, we will still create a NetDeviceContainer, and use the pointToPoint helper to install the communication between these and the channel;

NetDeviceContainer devices;
devices = pointToPoint.Install(nodes); 

this will install one netdevice for the nodes and connect them to the channel.


appearently, we don't need dedicated bridges in our network, these can just be nodes... configured as AP and have a P2P connection to the consumer node. 

how to save to a txt file to open it in libre office:
	use file-aggregator as, shown in t.cc script
how to print a line as debug output in the script:
    std::cout << " Delay : " << i->second.delaySum / i->second.rxPackets << "\n";
how do we interconnect the AP's? 
	with cables
what kind of AP's are we using? 
	http://www.practicallynetworked.com/networking/bridge_types.htm
	options are:
	- hub
		not a good idea, hubs seem to forward the data to each available port, which is not intended
	- switches	
		Switches can be used in heavily loaded networks to isolate data flow and improve performance.
	- routers
		seem quite equal to switches
	-->> bridges
		plausible, as there is already a example available, "used to connect two segmets of a lan"
		OSI layer 2, switches data based on MAC address
		first three octets of the IP should match (?)	 
		how to create a bridge in the simulator?
		
should the nodes be moving? 
	no, this introduces extra difficulties in the simulation, which is not necessary
		nodes do need a physical location, as they should all receive eachother

how is the (random generated) traffic flowing?
	all to one node that is on a wire behind an AP (this node does not fail)
		easy to understand what is happening
		throughput and datarate can go up, as more AP's go down
		how do the nodes reconnect after a AP goes down?
	all nodes connected to eachother via AP's
		who is tx'ing who?
		where to reconnect a node after AP fails?
	
	-->>all ap's are directly connected to one endpoint node E with a cable, if one ap goes down, the 		start nodes S connect to the failing AP should reconnect to the nearest AP 
		- what is the throughput limit of the AP?
			this should depend on the network traffic in the local lan, so infinitly fast
		- what to do with the interference between the lans?
			...? don't take this into consideration just yet
			but all nodes should be capable of reaching each AP 
				-> nodes need a physical location.
		- how does a node switch after an AP is down? 	
			it could reconnect to a random AP in range
			it could reconnect to an AP dealing with the lowest load
			->> it could reconnect to the AP offering the best connections so far.



			

naslagwerk:
good project:
https://blackboard.tudelft.nl/bbcswebdav/pid-2672408-dt-content-rid-9154923_2/courses/37651-151603/NS3%20Project%20Report%20%28Rizqi%20H%204410106%29.pdf
working dir:
/home/jeffrey/Desktop/ns-allinone-3.24.1/ns-3.24.1
run python script:
./waf --pyrun examples/wireless/mixed-wireless.py
ns3nam doxygen:
https://www.nsnam.org/doxygen/group__dataoutput.html

impediments:
- time to complete assignment
- c++ language unknow
- framework is complicated, and seems a bit of an overkill
- errors in framework are not straightforwared
- no out-of-the-box solutions
- no suggestions
		- eclipse 
			- https://www.youtube.com/watch?v=npv8gBoySyk



01: 1
02: 
03: 
04: 4,2,1
05: 
06: 6,3,2
07: 
08: 8,4,2,1
09: 9,3,1
10: 10,5,2,1
11:
12: 12,6,3,2,1
13:
14: 14,7,1
15: 15,5,1
16: 16,8,4,2,1
17:
18: 18,9,6,3,2  
19:
20: 20,10,5,2,1
21: 21,7,1
22: 22,11,2,1
23: 
24: 24,12,8,6,4,2
25: 25,5,1
26: 26,13,4,2,1
27:
28: 28,7,2,1
29: 
30: 30, 15, 10, 6, 5, 3, 2, 1
40: 20, 10, 5, 4, 2, 1


voor het verslag:
- wat doet tie propagationloss model, en waarom doet mijn simulatie het dan gelijk niet meer?

- misschien mobility aanpassen, zodat we met elke run net iets andere output krijgen
	- eerst eens kijken of we de .mob kunnen open?
		- daar staat plain text in
		- is dit steeds dezelfde?

- we kunnen aanpassen:
	- mobility model,
	- data rate, 












